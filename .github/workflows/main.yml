name: Deploy to Firebase Hosting

on:
  push:
    branches:
      - main  # または master など、あなたが使っているブランチ名に変更

jobs:
  build_and_deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4 # 1. GitHubリポジトリのコードをチェックアウト

      # --- 🚀 ここから追加するビルドステップ 🚀 ---
      - name: Set up Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '20' # あなたのプロジェクトに合わせてバージョンを変更
          
      - name: Install dependencies
        run: npm install
        
      - name: Build project
        run: npm run build # または build:production など、あなたのpackage.jsonに合わせたコマンド
      # --- 🚀 ここまで追加 🚀 ---
      
      - name: Deploy to Firebase # 2. Firebaseデプロイ用のアクション
        uses: FirebaseExtended/action-hosting-deploy@v0
        with:
          repoToken: ${{ secrets.GITHUB_TOKEN }} # GitHubのトークン
          firebaseServiceAccount: ${{ secrets.FIREBASE_SERVICE_ACCOUNT_LINK_LINKER }} # プロジェクトに合わせたサービスアカウントを自動で使用
          projectId: link-linker # 🔥 ここをあなたのプロジェクトID（link-linker）に設定
          channelId: live # liveチャンネル（本番環境）にデプロイ



