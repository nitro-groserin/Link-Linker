<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <title>リンクリンカー</title>
    <style>
        /* ========================================================= */
        /* CSS (デザイン) セクション - 省略せず全て含みます */
        /* ========================================================= */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #fce4ec;
            color: #333;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding-top: 20px; 
            margin: 0; 
            min-height: 100vh;
        }

        .container {
            background-color: #ffffff;
            padding: 20px 15px; 
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            width: 95%; 
            max-width: 420px;
            box-sizing: border-box; 
        }

        h1 {
            color: #d32f2f;
            font-size: 1.8em; 
            margin-bottom: 20px;
            text-align: center;
        }

        .input-group {
            display: flex;
            gap: 8px; 
            margin-bottom: 15px;
            flex-direction: column; 
        }
        
        .input-group input[type="text"] {
            padding: 10px; 
            border: 2px solid #ccc;
            border-radius: 8px;
            box-sizing: border-box;
            font-size: 1em;
            width: 100%; 
            transition: border-color 0.3s;
        }

        .input-group input[type="text"]:focus {
            border-color: #d32f2f;
            outline: none;
        }

        button {
            padding: 10px 15px; 
            background-color: #d32f2f;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            transition: background-color 0.3s, box-shadow 0.3s;
            width: 100%; 
            box-sizing: border-box;
            margin-top: 5px;
        }

        button:hover:not(:disabled) {
            background-color: #b71c1c;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.2);
        }

        button:disabled {
            background-color: #ffcdd2;
            color: #d32f2f;
            cursor: not-allowed;
        }

        @media (min-width: 501px) {
            .input-group {
                flex-direction: row; 
                gap: 10px;
            }

            .input-group input[type="text"] {
                flex-grow: 1;
                width: auto;
            }
            
            #urlInput {
                flex-grow: 3;
            }

            #linkNameInput {
                flex-grow: 2;
            }

            .input-group button { 
                width: auto;
                min-width: 80px;
            }
        }
        
        /* その他の共通スタイル */
        .sample-url {
            margin-top: 20px;
            padding: 15px 0;
            text-align: center;
            color: #666;
            font-size: 0.9em;
            border-top: 1px dashed #ffcdd2; 
            padding-top: 15px;
        }
        .sample-url p {
            font-weight: bold;
            color: #d32f2f;
            margin-bottom: 8px;
        }
        .sample-url a {
            color: #333; 
            text-decoration: none;
            word-break: break-all;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            border: 1px solid #ffcdd2;
            border-radius: 8px;
            background-color: #ffebee;
            padding: 10px 15px; 
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.08);
            margin: 0 auto;
            max-width: 100%;
            position: relative; 
        }
        #resultContainer {
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid #eee;
            min-height: 50px;
        }
        
        #resultContainer > p {
            font-weight: bold;
            color: #555;
            margin-bottom: 15px;
        }
        /* リンクリストのスタイル */
        .generated-links {
            display: flex;
            flex-direction: column;
            gap: 8px; 
            min-height: 200px; 
        }
        .generated-links a {
            display: flex;
            flex-direction: column; 
            align-items: flex-start;
            padding: 10px 15px; 
            background-color: #ffebee;
            color: #333; 
            text-decoration: none;
            border-radius: 8px;
            border: 1px solid #ffcdd2;
            transition: background-color 0.3s, transform 0.2s, opacity 0.5s;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.08);
            position: relative; 
        }
        .link-name {
            font-weight: bold;
            color: #333;
            max-width: 100%;
            margin-bottom: 3px; 
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
        }
        .link-url {
            font-size: 0.85em; 
            color: #d32f2f;
            max-width: 100%;
            word-break: break-all;
            text-align: left;
        }
        .timer-display {
            font-weight: normal;
            font-size: 0.85em; 
            color: #d32f2f;
            margin-left: 8px; 
            white-space: nowrap;
        }
        .app-footer {
            margin-top: 25px; 
            padding: 10px 0;
            color: black; 
            font-size: 0.8em;
            text-align: center;
            width: 95%; 
            max-width: 420px;
            box-sizing: border-box;
            border-top: 1px solid #ffcdd2; 
        }
        /* ★ローカルメモ機能のレイアウト変更に伴うCSS追加 */
        .memo-buttons {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        #saveMemoButton {
            flex-grow: 1;
            margin-top: 0;
        }
        #clearMemoButton {
            flex-grow: 1;
            margin-top: 0;
            background-color: #757575; 
        }
        #clearMemoButton:hover:not(:disabled) {
            background-color: #424242;
        }
        #savedMemoDisplay {
            width: 100%;
            min-height: 100px;
            padding: 10px;
            box-sizing: border-box;
            border: 1px solid #ffcdd2;
            border-radius: 8px;
            background-color: #f8f8f8; /* 保存スペースの背景を少し変える */
            white-space: pre-wrap; /* 改行を反映 */
            overflow-y: auto; /* スクロール可能に */
            margin-bottom: 10px;
            font-size: 1em;
            color: #333;
        }
        #newMemoInput {
            width: 100%; 
            min-height: 80px;
            padding: 10px; 
            box-sizing: border-box; 
            border: 1px solid #ccc; 
            border-radius: 8px; 
            resize: vertical; 
            font-size: 1em;
            margin-bottom: 10px;
        }
        /* ページネーション用CSSの追加 */
        .pagination {
            display: flex;
            justify-content: center;
            margin: 15px 0;
            gap: 5px;
        }
        .page-button {
            padding: 5px 10px;
            border: 1px solid #d32f2f;
            border-radius: 5px;
            cursor: pointer;
            background-color: #fff;
            color: #d32f2f;
            font-size: 0.9em;
            transition: background-color 0.2s;
        }
        .page-button.active {
            background-color: #d32f2f;
            color: white;
            font-weight: bold;
        }
        .page-button:hover {
            background-color: #ffcdd2;
        }
    </style>
</head>
<body>


<div style="
    text-align: center;
    border: 2px solid #ff4500; 
    padding: 10px; 
    margin: 15px auto 15px auto; 
    max-width: 400px;
    background-color: #fffaf0;
    border-radius: 8px;
">
    <h3 style="margin-top: 0; color: #ff4500; font-size: 15px;">
        YoutubeやTikTok等のコンテンツ<br>
      🔥  会社の商品等を格安で宣伝してみませんか？ 🔥
    </h3>
    <p style="font-size: 13px; color: #333; margin-bottom: 5px;">
        コチラのスペースにドカンと掲載💪<br>
        <strong style="color: #ff4500; font-size: 15px;">
            【掲載料金：企業・月額30,000円】
            <br>
            【個人・月額5,000円】
        </strong>
    </p>
    <a href="mail.html" style="
        display: inline-block;
        padding: 5px 15px; 
        background-color: #ff4500;
        color: white;
        text-decoration: none;
        border-radius: 5px;
        font-weight: bold;
        font-size: 13px;
        margin-top: 5px;
    ">
        詳細・お問い合わせはこちら
    </a>
</div>


    
    <div class="container">
        
        


        
        <h1>リンクリンカー</h1>

        <div class="input-group">
            <input type="text" id="linkNameInput" placeholder="リンクの名前 (任意)" size="20">
            <input type="text" id="urlInput" placeholder="URLを貼り付けてください (https://...)" size="40">
            <button onclick="displayUrl()">追加</button>
        </div>

        <div class="sample-url">
            <p>📋 **サンプルリンク**</p>
            <a href="https://nitro-groserin.github.io/Brave-Undead-Hero-/" target="_blank">
                <span class="link-name" style="color: #333;">[ブレイブ・アンデッド・ヒーロー]</span>
                <span class="link-url">https://nitro-groserin.github.io/Brave-Undead-Hero-/</span>
            </a>
        </div>

        <div id="resultContainer">
            <p>入力欄にURLと名前を貼り付け、「追加」ボタンを押してください。**追加されたリンクは10分後に自動で削除されます。**</p>
            
            <div class="pagination" id="paginationContainer">
                </div>

            <div class="generated-links" id="generatedLinksDiv">
            </div>
        </div>

    </div>

    <div style="text-align: center; padding: 5px; margin: 5px auto; max-width: 400px;">
        <a href="https://nitro-groserin.github.io/Yakuza-Slayer">
            <img src="/20251002_135127.jpg" alt="反社スレイヤー" style="max-width: 100%; height: auto; border: 2px solid #ff4500; border-radius: 8px; background-color: #fffaf0; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);">
        </a>
    </div>
    
    <img src="http://www5.kannet.ne.jp/~counter/count.cgi?name=brave&type=1&width=9">

    <div class="container" id="localMemoContainer" style="margin-top: 20px; padding: 15px;">
        <p style="font-weight: bold; color: #d32f2f; margin-bottom: 10px; text-align: center;">💾ツイメモ (あなた専用ツイート)</p>
        
        <div id="savedMemoDisplay">保存されたツイートがここに表示されます。</div>
        
        <textarea id="newMemoInput" placeholder="新しいツイートを入力してください。"></textarea>
        
        <div class="memo-buttons">
            <button id="saveMemoButton">💾 ツイートする</button>
            <button id="clearMemoButton">🗑️ 消去する</button> 
        </div>
        <p id="memoStatus" style="font-size: 0.9em; color: #777; text-align: center; margin-top: 5px;"></p>
    </div>
    <footer class="app-footer">
        © 2025 Link Linker. All rights reserved by 暴風プロジェクト
    </footer>











<script type="module">
    // 1. Firebase v12のモジュールをインポート
    // ★ where を使用するため、インポートを確認
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-app.js";
    import { getFirestore, collection, query, where, limit, getDocs, addDoc, onSnapshot, orderBy } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-firestore.js";

    // 2. Firebase設定と初期化
    const firebaseConfig = {
        apiKey: "AIzaSyDKt3Ho2JYOsrupclb5uIOTRMFbubuVRNk",
        authDomain: "link-linker.firebaseapp.com",
        projectId: "link-linker",
        storageBucket: "link-linker.firebasestorage.app",
        messagingSenderId: "943254114325",
        appId: "1:943254114325:web:21566b315af94fcbfd3e1c"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app); // 💡 Firestoreオブジェクトをローカル変数 db に接続


    // =========================================================
    // 3. メインロジック（すべての関数定義と変数）
    // =========================================================

    // リンクが自動削除されるまでの時間 (10分 = 600,000ミリ秒)
    const DELETE_DELAY_MS = 10 * 60 * 1000;
    // 1ページあたりのリンク数
    const LINKS_PER_PAGE = 10;
    // ローカルメモのキー
    const LOCAL_MEMO_KEY = 'linklinker_user_memo';

    let allLinks = [];
    let currentPage = 1;

    const resultContainer = document.getElementById('resultContainer');
    const generatedLinksDiv = document.getElementById('generatedLinksDiv');
    const paginationContainer = document.getElementById('paginationContainer');
    const messageElement = resultContainer ? resultContainer.querySelector('p') : null;

    // ローカルメモ関連のDOM要素
    const savedMemoDisplay = document.getElementById('savedMemoDisplay');
    const newMemoInput = document.getElementById('newMemoInput');
    const saveButton = document.getElementById('saveMemoButton');
    const clearButton = document.getElementById('clearMemoButton');
    const memoStatus = document.getElementById('memoStatus');

    // -----------------------------------------------------
    // 音声要素の定義
    // -----------------------------------------------------
    const saveSound = new Audio('/sound-box/PC-Mouse06-1.mp3'); 
    const clearSound = new Audio('/sound-box/PC-Mouse06-1.mp3'); 
    saveSound.volume = 0.5;
    clearSound.volume = 0.5;


    // -----------------------------------------------------
    // ローカルメモの保存と読み込み/消去
    // -----------------------------------------------------

    function loadLocalMemo() {
        if (!savedMemoDisplay || !newMemoInput) return;

        const savedJson = localStorage.getItem(LOCAL_MEMO_KEY);

        try {
            const savedMemos = savedJson ? JSON.parse(savedJson) : [];

            if (savedMemos.length > 0) {
                savedMemoDisplay.innerHTML = ''; 
                savedMemos.reverse().forEach(memoData => {
                    appendMemoToDisplay(memoData.content, memoData.timestamp);
                });
                memoStatus.textContent = `${savedMemos.length}件のツイートが読み込まれました。`;
            } else {
                savedMemoDisplay.textContent = 'まだツイートはありません。';
                memoStatus.textContent = '';
            }

        } catch (e) {
            console.error("ローカルツイートの読み込みエラー。データ形式をリセットします。", e);
            localStorage.removeItem(LOCAL_MEMO_KEY);
            savedMemoDisplay.textContent = 'データ形式が不正でした。リセットしました。';
        }


        if (saveButton) {
            saveButton.addEventListener('click', saveLocalMemo);
        }
        if (clearButton) {
            clearButton.addEventListener('click', clearLocalMemo);
        }
    }


    function appendMemoToDisplay(content, timestamp) {
        if (savedMemoDisplay.textContent === 'まだツイートはありません。') {
            savedMemoDisplay.innerHTML = '';
        }

        const memoDiv = document.createElement('div');
        memoDiv.style.padding = '8px 10px';
        memoDiv.style.borderBottom = '1px solid #eee';
        memoDiv.style.backgroundColor = '#fff';
        memoDiv.style.borderRadius = '6px';
        memoDiv.style.marginBottom = '5px';
        memoDiv.style.wordBreak = 'break-word';

        const contentP = document.createElement('p');
        contentP.textContent = content;
        contentP.style.margin = '0 0 5px 0';
        contentP.style.whiteSpace = 'pre-wrap';
        contentP.style.color = '#333';

        const timeSpan = document.createElement('span');
        const date = new Date(timestamp);
        timeSpan.textContent = `📝 ${date.toLocaleDateString()} ${date.toLocaleTimeString()}`;
        timeSpan.style.fontSize = '0.8em';
        timeSpan.style.color = '#777';
        timeSpan.style.display = 'block';
        timeSpan.style.textAlign = 'right';

        memoDiv.appendChild(contentP);
        memoDiv.appendChild(timeSpan);

        savedMemoDisplay.prepend(memoDiv);
    }


    function saveLocalMemo() {
        if (newMemoInput) {
            const memoContent = newMemoInput.value.trim();

            if (memoContent === "") {
                memoStatus.textContent = '⚠️ ツイートが空です。何か入力してください。';
                return;
            }

            saveButton.disabled = true;
            saveButton.textContent = '保存中...';
            clearButton.disabled = true;

            const currentTimestamp = Date.now();
            const newMemoData = {
                content: memoContent,
                timestamp: currentTimestamp
            };

            const savedJson = localStorage.getItem(LOCAL_MEMO_KEY);
            let savedMemos = savedJson ? JSON.parse(savedJson) : [];

            savedMemos.push(newMemoData);

            localStorage.setItem(LOCAL_MEMO_KEY, JSON.stringify(savedMemos));

            appendMemoToDisplay(memoContent, currentTimestamp);

            newMemoInput.value = '';

            memoStatus.textContent = `✅ ツイートが ${new Date(currentTimestamp).toLocaleTimeString()} に追加されました！`;
            saveSound.play().catch(e => console.log("保存音の再生に失敗:", e)); 

            setTimeout(() => {
                saveButton.disabled = false;
                saveButton.textContent = '💾 ツイートする';
                clearButton.disabled = false;
            }, 500);
        }
    }

    function clearLocalMemo() {
        if (confirm("保存されたツイートを完全に消去しますか？")) {
            localStorage.removeItem(LOCAL_MEMO_KEY); 

            savedMemoDisplay.innerHTML = '';
            savedMemoDisplay.textContent = 'まだツイートはありません。';
            newMemoInput.value = ''; // ★ ここを修正

            memoStatus.textContent = '🗑️ ツイートは完全に消去されました。';
            clearSound.play().catch(e => console.log("消去音の再生に失敗:", e)); 
        }
    }

    // -----------------------------------------------------
    // ページネーションと描画関連
    // -----------------------------------------------------

    function renderPage(pageNum) {
        const totalPages = Math.ceil(allLinks.length / LINKS_PER_PAGE);
        if (pageNum < 1) pageNum = 1;
        if (pageNum > totalPages && totalPages > 0) pageNum = totalPages;

        currentPage = pageNum;

        if (generatedLinksDiv) generatedLinksDiv.innerHTML = '';

        const startIndex = (currentPage - 1) * LINKS_PER_PAGE;
        const endIndex = startIndex + LINKS_PER_PAGE;
        const linksToShow = allLinks.slice(startIndex, endIndex);

        if (linksToShow.length === 0 && allLinks.length > 0 && currentPage > 1) {
            renderPage(currentPage - 1);
            return;
        }

        linksToShow.forEach(linkData => {
            const linkElement = createLinkElement(linkData);
            if (generatedLinksDiv) generatedLinksDiv.appendChild(linkElement);

            const timerDisplay = linkElement.querySelector('.timer-display');
            if (timerDisplay) {
                const remaining = linkData.expirationTime - Date.now();
                timerDisplay.textContent = formatTime(remaining);
            }
        });

        renderPaginationButtons(totalPages);
    }

    function renderPaginationButtons(totalPages) {
        if (paginationContainer) paginationContainer.innerHTML = '';

        if (totalPages <= 1) {
            return;
        }

        for (let i = 1; i <= totalPages; i++) {
            const button = document.createElement('div');
            button.className = 'page-button';
            button.textContent = i;

            if (i === currentPage) {
                button.classList.add('active');
            }

            button.onclick = () => renderPage(i);
            if (paginationContainer) paginationContainer.appendChild(button);
        }
    }

    function createLinkElement(linkData) {
        const linkElement = document.createElement('a');
        linkElement.href = linkData.url;
        linkElement.target = "_blank";
        linkElement.dataset.id = linkData.id;

        const nameContainer = document.createElement('span');
        nameContainer.className = 'link-name';

        const nameText = document.createElement('span');
        nameText.textContent = linkData.name;

        const timerDisplay = document.createElement('span');
        timerDisplay.className = 'timer-display';

        nameContainer.appendChild(nameText);
        nameContainer.appendChild(timerDisplay);

        const urlSpan = document.createElement('span');
        urlSpan.className = 'link-url';
        urlSpan.textContent = linkData.url;

        linkElement.appendChild(nameContainer);
        linkElement.appendChild(urlSpan);

        return linkElement;
    }


    /**
     * URL追加ボタンのメイン処理 (HTMLの onclick から呼び出される)
     */
    window.displayUrl = async function() { // 💡 モジュール外から呼び出せるよう window に設定
        const urlInput = document.getElementById('urlInput');
        const linkNameInput = document.getElementById('linkNameInput');
        const addButton = document.querySelector('.input-group button');

        const url = urlInput ? urlInput.value.trim() : '';
        let linkName = linkNameInput ? linkNameInput.value.trim() : '';

        if (messageElement) messageElement.style.color = '#555';

        // 処理中はボタンを無効化
        if (addButton) {
            addButton.disabled = true;
            addButton.textContent = '処理中...';
        }

        try {
            // バリデーションとセキュリティチェック (中略)
            if (url === "" && messageElement) {
                messageElement.style.color = '#d32f2f';
                messageElement.textContent = '⚠️ URLは必須です。入力してください。';
                return;
            }
            const MAX_URL_LENGTH = 500;
            if (url.length > MAX_URL_LENGTH && messageElement) {
                messageElement.style.color = '#d32f2f';
                messageElement.textContent = `⚠️ URLが長すぎます。（最大${MAX_URL_LENGTH}文字までです。）`;
                return;
            }
            const BLACKLISTED_DOMAINS = ['bit.ly', 't.co', 'tinyurl.com', 'is.gd', 'goo.gl', 'rb.gy', 'ow.ly'];
            const isBlacklisted = BLACKLISTED_DOMAINS.some(domain => url.includes(domain));
            if (isBlacklisted && messageElement) {
                messageElement.style.color = '#d32f2f';
                messageElement.textContent = '⚠️ 短縮URLサービスからのリンクはセキュリティ上の理由により許可されていません。元のURLを貼り付けてください。';
                return;
            }
            const urlPattern = /^https:\/\/[a-z0-9\-\.]+\.[a-z]{2,}/i;
            if (!urlPattern.test(url) && messageElement) {
                messageElement.style.color = '#d32f2f';
                messageElement.textContent = '⚠️ URLは **https://** で始まり、有効なドメイン形式である必要があります。';
                return;
            }

            // URLの重複チェック
            // 💡 【修正点】Firebase v12の新しい書き方に変更
            const q = query(collection(db, "links"), where("url", "==", url), limit(1));
            const snapshot = await getDocs(q); 

            if (!snapshot.empty && messageElement) {
                messageElement.style.color = '#d32f2f';
                messageElement.textContent = '🚫 このURLは**既に登録されています**。別のURLを入力してください。';
                if (urlInput) urlInput.value = '';
                if (linkNameInput) linkNameInput.value = '';
                return;
            }

            // リンク名の処理
            if (linkName === "") {
                linkName = "🔗 リンク";
            }

            const startTime = Date.now();
            const expirationTime = startTime + DELETE_DELAY_MS;

            // Firestoreにデータを書き込む
            // 💡 【修正点】Firebase v12の新しい書き方に変更
            await addDoc(collection(db, "links"), {
                url: url,
                name: linkName,
                expirationTime: expirationTime,
                timestamp: startTime
            });

            if (messageElement) messageElement.textContent = `✅ リンク「${linkName}」が追加されました。`;

        } catch (error) {
            console.error("リンク処理エラー: ", error);
            if (messageElement) {
                messageElement.style.color = '#d32f2f';
                messageElement.textContent = '🔴 リンクの処理中に致命的なエラーが発生しました。コンソールを確認してください。';
            }
        } finally {
            // 処理終了後に必ずボタンを再有効化
            if (addButton) {
                addButton.disabled = false;
                addButton.textContent = '追加';
            }
            if (urlInput) urlInput.value = '';
            if (linkNameInput) linkNameInput.value = '';
            if (linkNameInput) linkNameInput.focus();
        }
    }
// Part 3/3 (JavaScript: リスナーと実行ロジック) に続く -->










    function formatTime(ms) {
        const totalSeconds = Math.max(0, Math.floor(ms / 1000));
        const minutes = Math.floor(totalSeconds / 60);
        const seconds = totalSeconds % 60;

        const paddedSeconds = String(seconds).padStart(2, '0');

        return `${minutes}:${paddedSeconds}`;
    }

    // ★ ここが最も重要な修正点です ★
    function startFirestoreListener() {
         const linksCollection = collection(db, "links"); 
         
         // リアルタイムリスナーを開始
         // 💡 【修正済み】where("expirationTime", ">", Date.now()) を追加し、有効なリンクのみを取得
         const q = query(
             linksCollection, 
             where("expirationTime", ">", Date.now()), // ★ 有効期限切れのリンクは除外
             orderBy("expirationTime", "asc") // ★ orderByの最初のフィールドはwhere句のフィールドに合わせる必要があるため変更
         );

         onSnapshot(q, (snapshot) => {
             allLinks = snapshot.docs.map(doc => ({
                 id: doc.id,
                 ...doc.data()
             }));
             renderPage(currentPage);
         }, error => {
             console.error("Firestoreのリアルタイム監視エラー: ", error);
         });
    }

    // 1秒ごとにタイマーとページを更新
    setInterval(() => {
        renderPage(currentPage);
    }, 1000);

    // DOMContentLoadedでリスナーとローカルメモの読み込みを行う
    document.addEventListener('DOMContentLoaded', () => {
        startFirestoreListener(); // 💡 モジュール内なので、初期化後にすぐに実行
        loadLocalMemo();
    });

    // =========================================================
    // 音声再生部分
    // =========================================================
    const audioPaths = [
        { src: '/Firebaseページ/videoplayback.mp3', volume: 1.0, id: 'siren' },
        { src: '', volume: 1.0, id: 'bonfire' }
    ];

    const audioElements = {};

    audioPaths.forEach(path => {
        if (path.src) {
            audioElements[path.id] = new Audio(path.src);
            audioElements[path.id].volume = path.volume;
            audioElements[path.id].loop = true;
        }
    });

    // ユーザー操作による初期化（自動再生ポリシー回避のため）
    document.addEventListener('click', () => {
        if (audioElements['siren'] && audioElements['siren'].paused) {
            audioElements['siren'].play().catch(e => console.log("サイレンの再生に失敗:", e));
        }
        if (audioElements['bonfire'] && audioElements['bonfire'].paused) {
             audioElements['bonfire'].play().catch(e => console.log("焚き火の再生に失敗:", e));
        }
    }, { once: true });
</script>


    
</body>
</html>














